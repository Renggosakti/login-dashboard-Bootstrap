<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portal Taman Bungkul — Login & Register Futuristik</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; }
body {
  margin: 0;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Poppins', sans-serif;
  color: #fff;
  background: radial-gradient(circle at 20% 30%, #031b25 0%, #05081a 70%);
  overflow: hidden;
  perspective: 1000px;
}

/* Background efek */
.parallax-bg {
  position: absolute;
  width: 150%;
  height: 150%;
  top: -25%;
  left: -25%;
  background: radial-gradient(circle at 30% 20%, #00ffff22, transparent 70%),
              radial-gradient(circle at 80% 70%, #00ffaa22, transparent 60%);
  animation: rotateBG 40s linear infinite;
  transform: rotateX(25deg);
  z-index: 0;
}
@keyframes rotateBG {
  from { transform: rotateZ(0deg) rotateX(25deg); }
  to { transform: rotateZ(360deg) rotateX(25deg); }
}

/* Partikel */
.bg-particle {
  position: absolute;
  background: rgba(0, 255, 255, 0.12);
  border-radius: 50%;
  animation: float 12s linear infinite;
}
@keyframes float {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(-900px) rotate(720deg); opacity: 0; }
}

/* Card utama */
.auth-container {
  z-index: 5;
  width: 400px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 18px;
  padding: 42px 32px;
  backdrop-filter: blur(14px);
  box-shadow: 0 0 40px rgba(0,255,255,0.25);
  transition: all .5s ease;
  transform-style: preserve-3d;
}
.auth-container:hover {
  transform: rotateY(4deg) translateY(-6px);
  box-shadow: 0 0 60px rgba(0,255,255,0.35);
}

/* Judul */
.auth-title {
  text-align: center;
  font-weight: 700;
  font-size: 1.7rem;
  background: linear-gradient(90deg, #00e0ff, #00ffb0);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 22px;
}

/* Tabs */
.nav-tabs { border: none; justify-content: center; margin-bottom: 28px; }
.nav-tabs .nav-link {
  color: rgba(255,255,255,0.7);
  background: transparent;
  border: none;
  font-weight: 600;
}
.nav-tabs .nav-link.active {
  color: #00ffff;
  border-bottom: 2px solid #00ffff;
}

/* Input */
.form-control {
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.2);
  color: #fff;
  border-radius: 12px;
  padding: 12px;
}
.form-control::placeholder { color: rgba(255,255,255,0.6); }
.form-control:focus {
  border-color: #00ffff;
  box-shadow: 0 0 10px rgba(0,255,255,0.35);
  background: rgba(255,255,255,0.15);
}

/* Tombol */
.btn-glow {
  width: 100%;
  background: linear-gradient(90deg,#00e0ff,#00ffb0);
  border: none;
  border-radius: 12px;
  color: #000;
  font-weight: 700;
  padding: 12px;
  transition: all 0.3s ease;
  box-shadow: 0 0 20px rgba(0,255,255,0.25);
  animation: pulse 2.5s infinite;
}
.btn-glow:hover {
  transform: scale(1.05);
  box-shadow: 0 0 30px rgba(0,255,255,0.45);
}
@keyframes pulse {
  0%,100% { box-shadow: 0 0 10px rgba(0,255,255,0.2); }
  50% { box-shadow: 0 0 30px rgba(0,255,255,0.5); }
}

/* Alert */
.alert-custom {
  display: none;
  background: rgba(0,255,255,0.1);
  border: 1px solid rgba(0,255,255,0.25);
  color: #00ffff;
  border-radius: 10px;
  text-align: center;
  padding: 8px;
  margin-top: 10px;
  animation: fadeIn .4s ease;
}
@keyframes fadeIn { from{opacity:0} to{opacity:1} }

.divider { text-align: center; color: rgba(255,255,255,0.5); margin: 18px 0; font-size: .9rem; }
.text-link { color:#00ffff;cursor:pointer; }
#agreement { font-size: 0.85rem; color: rgba(255,255,255,0.7); text-align: center; }
</style>
</head>
<body>
<div class="parallax-bg"></div>
<div id="particles"></div>

<div id="authCard" class="auth-container">
  <h2 class="auth-title">Portal Taman Bungkul</h2>

  <ul class="nav nav-tabs">
    <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#login">Login</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#register">Register</button></li>
  </ul>

  <div class="tab-content">
    <!-- LOGIN -->
    <div class="tab-pane fade show active" id="login">
      <form id="loginForm">
        <div class="mb-3"><input type="email" id="loginEmail" class="form-control" placeholder="Email" required></div>
        <div class="mb-3"><input type="password" id="loginPassword" class="form-control" placeholder="Password" required></div>
        <button type="submit" class="btn-glow">Masuk Sekarang</button>
        <div class="divider">atau</div>
        <div class="text-center"><span class="text-link" id="gotoRegister">Buat akun baru</span></div>
        <div id="loginAlert" class="alert-custom"></div>
      </form>
    </div>

    <!-- REGISTER -->
    <div class="tab-pane fade" id="register">
      <form id="registerForm">
        <div class="mb-2"><input type="text" id="regName" class="form-control" placeholder="Nama Lengkap" required></div>
        <div class="mb-2"><input type="text" id="regDisplay" class="form-control" placeholder="Display Name" required></div>
        <div class="mb-2"><input type="email" id="regEmail" class="form-control" placeholder="Email" required></div>
        <div class="mb-2"><input type="password" id="regPassword" class="form-control" placeholder="Password" required></div>
        <div class="mb-3"><input type="password" id="regConfirm" class="form-control" placeholder="Konfirmasi Password" required></div>
        <div id="agreement">Dengan mengklik <b>Register</b>, Anda setuju pada <u>Terms & Conditions</u>.</div>
        <button type="submit" class="btn-glow mt-3">Register</button>
        <div id="registerAlert" class="alert-custom"></div>
      </form>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2023/03/01/audio_9c27c9a37d.mp3?filename=button-click-124476.mp3"></audio>
<audio id="successSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2c10a7b074.mp3?filename=correct-2-46134.mp3"></audio>

<script>
const container=document.getElementById('particles');
for(let i=0;i<25;i++){
  const p=document.createElement('div');
  p.className='bg-particle';
  p.style.left=Math.random()*100+'%';
  p.style.top=Math.random()*100+'%';
  p.style.width=p.style.height=(10+Math.random()*60)+'px';
  p.style.animationDuration=(10+Math.random()*10)+'s';
  p.style.animationDelay=Math.random()*10+'s';
  container.appendChild(p);
}

const clickSound=document.getElementById('clickSound');
const successSound=document.getElementById('successSound');
function play(s){ s.currentTime=0; s.play(); }

/* Tombol ke register */
document.getElementById('gotoRegister').addEventListener('click',()=>{
  play(clickSound);
  const regTab=document.querySelector('[data-bs-target="#register"]');
  new bootstrap.Tab(regTab).show();
});

/* Validasi format email */
function validEmail(email){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email); }

/* Register */
document.getElementById('registerForm').addEventListener('submit',e=>{
  e.preventDefault(); play(clickSound);

  const name=document.getElementById('regName').value.trim();
  const disp=document.getElementById('regDisplay').value.trim();
  const email=document.getElementById('regEmail').value.trim();
  const pass=document.getElementById('regPassword').value.trim();
  const conf=document.getElementById('regConfirm').value.trim();
  const alertBox=document.getElementById('registerAlert');

  if(!name || !disp || !email || !pass || !conf){
    alertBox.textContent='⚠️ Lengkapi semua kolom.';
  } else if(!validEmail(email)){
    alertBox.textContent='❌ Email tidak valid!';
  } else if(pass!==conf){
    alertBox.textContent='❌ Password tidak sama.';
  } else {
    // Simpan user ke localStorage
    const newUser={name,disp,email,pass};
    localStorage.setItem('bungkulUser', JSON.stringify(newUser));
    alertBox.textContent='✅ Akun berhasil dibuat! Silakan login.';
    play(successSound);
    setTimeout(()=>{
      new bootstrap.Tab(document.querySelector('[data-bs-target="#login"]')).show();
    },1200);
  }

  alertBox.style.display='block';
  setTimeout(()=>alertBox.style.display='none',4000);
});

/* Login */
document.getElementById('loginForm').addEventListener('submit',e=>{
  e.preventDefault(); play(clickSound);

  const email=document.getElementById('loginEmail').value.trim();
  const pass=document.getElementById('loginPassword').value.trim();
  const alertBox=document.getElementById('loginAlert');
  const user=JSON.parse(localStorage.getItem('bungkulUser'));

  if(!validEmail(email)){
    alertBox.textContent='❌ Format email salah.';
  } else if(user && user.email===email && user.pass===pass){
    play(successSound);
    alertBox.textContent='✅ Login berhasil! Selamat datang '+user.disp;
    alertBox.style.display='block';

    // Simpan status login lengkap untuk dashboard
    const loggedUser = {
      name: user.name,
      disp: user.disp,
      email: user.email
    };
    localStorage.setItem('loggedInUser', JSON.stringify(loggedUser));

    setTimeout(()=>window.location.href='dashboard.html',1500);
  } else {
    alertBox.textContent='❌ Email atau password salah.';
  }

  alertBox.style.display='block';
  setTimeout(()=>alertBox.style.display='none',4000);
});
</script>
</body>
</html>
